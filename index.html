<!DOCTYPE html>
    <html>
    <head>
        <title>ğŸŒŠ ì¹¨ìˆ˜ ì˜ˆì¸¡ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ</title>
        <meta charset="utf-8">
        <style>
            body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
            .container { max-width: 1200px; margin: 0 auto; }
            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                     color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
            .card { background: white; padding: 20px; border-radius: 10px; 
                   box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
            .risk-meter { text-align: center; padding: 30px; font-size: 24px; border-radius: 10px; }
            .risk-0 { background: #4CAF50; color: white; }
            .risk-1 { background: #FFEB3B; color: black; }
            .risk-2 { background: #FF9800; color: white; }
            .risk-3 { background: #F44336; color: white; }
            .risk-4 { background: #9C27B0; color: white; }
            .input-group { margin: 10px 0; }
            .input-group label { display: inline-block; width: 150px; font-weight: bold; }
            .input-group input, .input-group select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 120px; }
            .btn { background: #667eea; color: white; padding: 12px 24px; 
                  border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-top: 10px; }
            .btn:hover { background: #5a6fd8; }
            .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
            .status { padding: 10px; border-left: 4px solid #667eea; background: #f8f9ff; border-radius: 5px; }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸŒŠ ì‹¤ì‹œê°„ ì¹¨ìˆ˜ ìœ„í—˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</h1>
                <p>Phase 8: ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì¹¨ìˆ˜ ì˜ˆì¸¡ ì„œë¹„ìŠ¤ (AUC 1.0 ì„±ëŠ¥)</p>
            </div>
            
            <div class="grid">
                <div class="card">
                    <h2>ğŸ“Š ì‹¤ì‹œê°„ ì˜ˆì¸¡</h2>
                    <div class="input-group">
                        <label>ê°•ìˆ˜ëŸ‰ (mm):</label>
                        <input type="number" id="precipitation" value="0" min="0" max="200">
                    </div>
                    <div class="input-group">
                        <label>ìŠµë„ (%):</label>
                        <input type="number" id="humidity" value="60" min="0" max="100">
                    </div>
                    <div class="input-group">
                        <label>ì˜¨ë„ (Â°C):</label>
                        <input type="number" id="temperature" value="20" min="-20" max="40">
                    </div>
                    <div class="input-group">
                        <label>3ì¼ ëˆ„ì  ê°•ìˆ˜ëŸ‰:</label>
                        <input type="number" id="precip_3d" value="0" min="0" max="500">
                    </div>
                    <div class="input-group">
                        <label>ê³„ì ˆ:</label>
                        <select id="season">
                            <option value="rainy">ì¥ë§ˆì² </option>
                            <option value="dry">ê±´ì¡°ê¸°</option>
                        </select>
                    </div>
                    <button class="btn" onclick="predictRisk()">ğŸ” ìœ„í—˜ë„ ì˜ˆì¸¡</button>
                </div>
                
                <div class="card">
                    <h2>ğŸ¯ ì˜ˆì¸¡ ê²°ê³¼</h2>
                    <div id="risk-display" class="risk-meter">
                        ì˜ˆì¸¡ì„ ì‹œì‘í•˜ì„¸ìš”
                    </div>
                    <div id="recommendations" class="status">
                        ê¶Œì¥ í–‰ë™ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>ğŸ“ˆ ëª¨ë¸ ì„±ëŠ¥ ì •ë³´</h2>
                <div class="grid">
                    <div>
                        <h3>ğŸ† Phase 7 í•µì‹¬ ì„±ê³¼</h3>
                        <ul>
                            <li>Random Forest & XGBoost: AUC 1.0</li>
                            <li>Phase 4 íŒŒìƒ ë³€ìˆ˜: 48.9% ê¸°ì—¬ë„</li>
                            <li>drainage_overflow: 9.28% ì¤‘ìš”ë„</li>
                            <li>ì™„ë²½í•œ í…ŒìŠ¤íŠ¸ì…‹ ì„±ëŠ¥</li>
                        </ul>
                    </div>
                    <div>
                        <h3>ğŸ” ì£¼ìš” ë°œê²¬</h3>
                        <ul>
                            <li>ê°•ìˆ˜ëŸ‰ 0-12mmì—ì„œë„ ì¹¨ìˆ˜ ê°€ëŠ¥</li>
                            <li>ëˆ„ì  íš¨ê³¼ê°€ ë‹¨ì¼ ê°•ìˆ˜ëŸ‰ë³´ë‹¤ ì¤‘ìš”</li>
                            <li>ë°°ìˆ˜ í•œê³„ ëª¨ë¸ì˜ ì •í™•ì„± ê²€ì¦</li>
                            <li>ìŠµë„-ê°•ìˆ˜ëŸ‰ ë³µí•© ì§€ìˆ˜ íš¨ê³¼ì </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</h2>
                <div class="grid">
                    <button class="btn" onclick="testScenario('calm')">í‰ìƒì‹œ (0mm)</button>
                    <button class="btn" onclick="testScenario('light')">ì†ŒëŸ‰ ê°•ìš° (15mm)</button>
                    <button class="btn" onclick="testScenario('medium')">ì¤‘ê°„ ê°•ìš° (35mm)</button>
                    <button class="btn" onclick="testScenario('heavy')">ì§‘ì¤‘í˜¸ìš° (80mm)</button>
                    <button class="btn" onclick="testScenario('extreme')">2022ë…„ê¸‰ (130mm)</button>
                </div>
            </div>
        </div>
        
        <script>
            // í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„°
            const scenarios = {
                'calm': {precipitation: 0, humidity: 60, avg_temp: 20, precip_sum_3d: 0, season_type: 'dry'},
                'light': {precipitation: 15, humidity: 75, avg_temp: 22, precip_sum_3d: 25, season_type: 'rainy'},
                'medium': {precipitation: 35, humidity: 85, avg_temp: 24, precip_sum_3d: 60, season_type: 'rainy'},
                'heavy': {precipitation: 80, humidity: 95, avg_temp: 26, precip_sum_3d: 120, season_type: 'rainy'},
                'extreme': {precipitation: 130, humidity: 96, avg_temp: 26, precip_sum_3d: 200, season_type: 'rainy'}
            };
            
            function testScenario(scenarioName) {
                const scenario = scenarios[scenarioName];
                document.getElementById('precipitation').value = scenario.precipitation;
                document.getElementById('humidity').value = scenario.humidity;
                document.getElementById('temperature').value = scenario.avg_temp;
                document.getElementById('precip_3d').value = scenario.precip_sum_3d;
                document.getElementById('season').value = scenario.season_type;
                predictRisk();
            }
            
            async function predictRisk() {
                const data = {
                    precipitation: parseFloat(document.getElementById('precipitation').value),
                    humidity: parseFloat(document.getElementById('humidity').value),
                    avg_temp: parseFloat(document.getElementById('temperature').value),
                    precip_sum_3d: parseFloat(document.getElementById('precip_3d').value),
                    season_type: document.getElementById('season').value
                };
                
                try {
                    const response = await fetch('/predict', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify(data)
                    });
                    
                    const result = await response.json();
                    
                    const riskDisplay = document.getElementById('risk-display');
                    riskDisplay.className = `risk-meter risk-${result.risk_level}`;
                    riskDisplay.innerHTML = `
                        ${result.risk_color} ${result.risk_name}<br>
                        <div style="font-size: 36px; margin: 10px 0;">${result.risk_score}ì </div>
                        ${result.action}
                    `;
                    
                    const recommendations = document.getElementById('recommendations');
                    recommendations.innerHTML = `
                        <h4>ğŸ“‹ ê¶Œì¥ í–‰ë™:</h4>
                        <ul>
                            ${result.recommendations.map(r => `<li>${r}</li>`).join('')}
                        </ul>
                        <p><small>ì˜ˆì¸¡ ì‹œê°„: ${new Date(result.prediction_time).toLocaleString()}</small></p>
                    `;
                    
                } catch (error) {
                    alert('ì˜ˆì¸¡ ì˜¤ë¥˜: ' + error.message);
                }
            }
            
            // ì´ˆê¸° ì˜ˆì¸¡
            predictRisk();
        </script>
    </body>
    </html>